<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="description" content="HTML5: All Your Games Are Belong to Us">
		<meta name="author" content="Erik Onarheim">
		<link rel="stylesheet" type="text/css" href="css/presentation.css">
		<link rel="stylesheet" type="text/css" href="css/custom.css">

	</head>
	<!-- Notes
	How do you build games in HTML5? In this talk we will learn about the basics of game development and how to apply it in a canvas based HTML5 game. We will be building a simple game live on the screen by leveraging JavaScript and new HTML5 features. We will learn about drawing to the HTML5 canvas, handling key input, maintaining frame rate, the subtleties of performing rotations and translations, setting up audio, sprite animations, basic game physics, and multiplayer support! I will also discuss some lessons in game programming that I learned the hard way so that you don’t have to. If you are interested in web game development, come learn about everything you need to make your first game –from the basics to the advanced.


	-->

	<body class="impress-not-supported">

		<div id="impress">
			<div id="introduction" class="step slide" data-x="-1500" data-y="-1500">
			    <p><b>HTML5: All Your Games Are Belong to Us</b></p>
			    <p> Building Games in HTML5 and JavaScript
			    
			    <br/>
			    <ul>
			    	<li><img src="images/cats.png" class="right-image border" style="
	width: 600px;"></li>
			    	<li>Erik Onarheim - Software Developer</li>
			    	<li>@ErikOnarheim</li>
			    	<li>erikonarheim.com</li>
			    </ul>
				</p>
			</div>
			<div id="about" class="step slide" data-x="-1500" data-y="0">
				<p><b>About Me</b></p>
				<hr/>
				<ul>
					<li><img src="images/me.png" class="right-float border"></li>
					<li class="space10">Software Developer @ General Mills</li>
					<li class="space10">Video Game Enthusiast</li>
					<li class="space10">Excalibur js - <a href="http://www.excaliburjs.com">excaliburjs.com</a></li>
					<li class="space10">Artist</li>
					<li class="space10">Hacker</li>
				</ul>

			</div>
			<div id="building-blocks" class="step slide" data-x="0" data-y="-1500">
				<p><b>HTML5 Games: The Building Blocks</b></p>
				
				<hr/>
				<ul style="margin-top:100px">
					<li><img src="images/buildingblocks.png" style="width:100%"></li>
				<ul>
			</div>
			<div id="canvas-overview" class="step slide" data-x="1500" data-y="0" >
				<p><b>Canvas</b></p>
				<hr>
				<img src="images/canvas.svg" style="width:100%">
			</div>


			<div id="code-drawing" class="step slide" data-x="0" data-y="0">
				<p><b>Code:</b> Drawing</p>
				<hr>
				<div id="drawing-editor" class="code-editor">if(!window.requestAnimationFrame){
    window.requestAnimationFrame = webkitRequestAnimationFrame ||
    mozRequestAnimationFrame || msRequestAnimationFrame;
}

var canvas = document.getElementById('canvas1');
var ctx = canvas.getContext('2d');

var x = 10;
var y = 10;
var dx = 1;
var dy = 0;

var interval = setInterval(function(){
    // Clear Canvas
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Update position
    x += dx;
    y += dy;
    
    dx += 0;
    dy += 1;
    
    // Draw shape
    ctx.fillStyle = 'blue';
    ctx.fillRect(x++, 10, 10, 10);
}, 17);</div>
			</div>

			<div id="example-drawing" class="step slide" data-x="0" data-y="0" data-z="2000">
				<p><b>Example: Game Loop</b></p>
				<button id="btn-drawing" class="btn btn-primary">Start</button>
				<hr/>
				<canvas id="canvas1" width="240" height="160" class="border">
				</canvas>
			</div>



			<!-- <div id="code-gameloop" class="step slide" data-x="0" data-y="0" data-z="2000">
				<p><b>Code:</b> Game Loop</p>
				<hr>
				<div id="gameloop-editor" class="code-editor">
var Game = function(){
	var me = this;
	me.update = function(delta){
		// update state of the game
		// including players, npcs, scenery, animations, etc.
	}

	me.draw = function(delta){
		// draw the game
	}

	me.start = function(){
		// todo: implement gameloop
		var lastTime =  Date.now();
		setInterval(function(){
			// Get the time to calculate time-elapsed
			var now = Date.now();

			var elapsed = Math.floor(now - lastTime);

			me.update(elapsed); 
			me.draw(elapsed);

			lastTime = now;
		}, 30);	
	}
	return me;
};

var game = new Game();
game.start()</div>
			</div> --><!-- 
			<div id="example-gameloop" class="step slide" data-x="0" data-y="0" data-z="2000">
				<p><b>Example: Game Loop</b></p>
				<button class="btn btn-primary">Start</button>
				<hr/>
				<canvas id="gameloop-canvas" class="border">
				</canvas>
			</div> -->
			<div id="structure-actor" class="step slide" data-x="0" data-y="1500">
				<b>Actors</b>
				<hr/>
				<p>They are responsible for each individual in your game, whether it is the player, an enemy, or part of the level.</p>
				<p>Generally are aware of position and velocity.
			</div>

			<div id="code-actor" class="step slide" data-x="0" data-y="1500" data-z="2000">
				<p><b>Code:</b> Actor</p>
				<hr/>
				<div id="actor-editor" class="code-editor">
var Actor = function(x, y, width, height){
	var me = this;

	me.pos = {x: x || 0, y: y || 0};
	me.vel = {vx: 0, vy: 0};
	me.width = width || 0;
	me.height = height || 0;	

	return me;
};

Actor.prototype.update = function(delta){
	// todo implement update
};

Actor.prototype.draw = function(delta){
	// todo implement draw
};


</div>


			</div>
			<div id="structure-scene-graph" class="step slide" data-x="0" data-y="3000">
				<b>Scene Graphs</b>
				<hr>
				Simple list - order in the list determines order drawn.
				Tree structure - easily implement parented movement, optimize drawing.

			</div>
			<div id="code-scene-graph" class="step slide" data-x="0" data-y="3000" data-z="2000">
				<p><b>Code:</b> Scene Graph</p>
				<hr/>
				<div id="scene-graph-editor" class="code-editor">
var Node = function(actor){
	var me = this;
	me.actor = actor;
	me.children = [];
};

Node.prototype.addChild = function(actor){
	this.children.push(actor);
};

Node.prototype.removeChild = function(actor){
	this.children.remove(actor);
};

Node.prototype.update = function(delta){
	this.actor.update(delta);
	this.children.forEach(function(child){
		child.update(delta);
	});
};

Node.prototype.draw = function(delta){
	this.actor.draw(delta);
	this.children.forEach(function(child){
		child.draw(delta);
	});
};</div>
			</div>
			<div id="drawing" class="step slide" data-x="0" data-y="4500">

			</div>


		</div>

		<script type="text/javascript" src="lib/jquery-2.0.3.min.js"></script>
		<script type="text/javascript" src="lib/impress.js"></script>
		<script type="text/javascript">impress().init()</script>
		<script type="text/javascript" src="lib/ace/ace.js" charset="utf-8"></script>
		<script type="text/javascript">
				var scriptHoister =function(scriptText){			 
		            if (scriptText) {
		                var head = document.getElementsByTagName("head")[0] || document.documentElement,
		                    script = document.createElement("script");
		                script.type = "text/javascript";
		                script.text = scriptText;
		                head.appendChild(script);
		                head.removeChild(script);
		            }
				};



				var makeEditor = function(id, removeCode){
					var editor = ace.edit(id);
					if(removeCode){
						editor.getSession().setValue('');
					}

					editor.setShowPrintMargin(false);
					editor.setTheme("ace/theme/monokai");
				    editor.getSession().setMode("ace/mode/javascript");
				    editor.getSession().setTabSize(4);
				    editor.getSession().setUseSoftTabs(true);
				    editor.getSession().setUseWorker(true);

				    editor.commands.addCommand({
					    name: 'Save',
					    bindKey: {win: 'Ctrl-S',  mac: 'Command-S'},
					    exec: function(editor) {
					        //...
					    },
					    readOnly: true // false if this command should not apply in readOnly mode
					});
					editor.setFontSize(20);
					return editor;
				}

				var hideDemoCode = false;
				var drawingEditor = makeEditor('drawing-editor', hideDemoCode);
				//var gameloopEditor = makeEditor('gameloop-editor');
				var actorEditor = makeEditor('actor-editor');
				var sceneGraphEditor = makeEditor('scene-graph-editor');

				var interval = undefined;
				// Setup coding demos
				$('#btn-drawing').on('click', function(){
					if(interval){clearInterval(interval)};
					var code = drawingEditor.getSession().getValue();
					scriptHoister(code);
				});



		</script>
	</body>
</html>